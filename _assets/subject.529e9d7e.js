let a=document.createElement("style");a.innerHTML="body{overflow-y:scroll}",document.head.appendChild(a);import{s as e,o as s,c as t,b as l,F as o,e as r,f as d,h as i,j as n,r as m,i as u,t as c}from"./index.5e95bf68.js";var b={name:"author_subject",data(){return{saveType:"update",thisUsername:this.$route.params.username,isThisUser:this.$route.params.username==this.$store.state.username,subjectList:[],dataFrom:{blogSubjectId:"",subjectName:"",synopsis:""}}},methods:{save(){"insert"==this.saveType?e({url:"/api/subject",method:"POST",data:this.dataFrom}).then((a=>{alert(JSON.stringify(a))})):e({url:"/api/subject",method:"PUT",data:this.dataFrom}).then((a=>{alert(JSON.stringify(a))}))},updateClick(a,e,s){this.dataFrom.blogSubjectId=a,this.dataFrom.subjectName=e,this.dataFrom.synopsis=s,this.saveType="update"},selectSubjectListByUsername(a){e({url:"/api/subject/username",method:"GET",params:{username:a}}).then((a=>{this.subjectList=a.data.list}))}},mounted(){this.selectSubjectListByUsername(this.$route.params.username)}};const p={class:"list-group blog-list"},h={key:0,class:"list-group-item "},y={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog"},f={class:"modal-content"},g=l("div",{class:"modal-header"},[l("h5",{class:"modal-title",id:"exampleModalLabel"},"专辑"),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},x={class:"mb-3"},F=l("label",{for:"exampleFormControlInput1",class:"form-label"},"专辑名",-1),C={class:"mb-3"},T=l("label",{for:"exampleFormControlTextarea1",class:"form-label"},"描述",-1),k={class:"modal-footer"},S=l("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"关闭",-1);b.render=function(a,e,b,U,L,N){const I=m("router-link");return s(),t(o,null,[l("ul",p,[(s(!0),t(o,null,r(L.subjectList,((a,e)=>(s(),t("li",{class:"list-group-item",key:e},[l(I,{to:{name:"subject_info",params:{subject_id:a.blogSubjectId}}},{default:u((()=>[l("strong",{textContent:c(a.subjectName)},null,8,["textContent"])])),_:2},1032,["to"]),L.isThisUser?(s(),t("span",{key:0,class:"float-end","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:e=>N.updateClick(a.blogSubjectId,a.subjectName,a.synopsis)},"编辑",8,["onClick"])):d("",!0),l("div",null,c(a.synopsis),1)])))),128)),L.isThisUser?(s(),t("li",h,[l("a",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:e[1]||(e[1]=a=>(L.dataFrom={},L.saveType="insert"))},"创建专辑")])):d("",!0)]),l("div",y,[l("div",j,[l("div",f,[g,l("div",v,[l("div",x,[F,i(l("input",{class:"form-control",id:"exampleFormControlInput1","onUpdate:modelValue":e[2]||(e[2]=a=>L.dataFrom.subjectName=a)},null,512),[[n,L.dataFrom.subjectName]])]),l("div",C,[T,i(l("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":e[3]||(e[3]=a=>L.dataFrom.synopsis=a)},null,512),[[n,L.dataFrom.synopsis]])])]),l("div",k,[S,l("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>N.save&&N.save(...a))},"保存")])])])])],64)};export default b;
