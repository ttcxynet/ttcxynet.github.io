/* empty css                  *//* empty css                   *//* empty css                     *//* empty css                  *//* empty css                   */import{_ as C,s as _}from"./index.11c52178.js";import{A as V,J as L,B as E,L as D,M as I,O as B,C as N,K as U,Q as j,o as a,e as f,m as t,w as o,F as T,n as c,t as v,d as x,f as z,j as s}from"./vendor.610329c2.js";const F={name:"admin_recommend",data(){return{insertDialogVisible:!1,routeName:this.$route.name,noticeList:[{},{}],editIndex:-1,orderButton:!0,form:{}}},created(){},methods:{insertNotice(){_({url:"/api/admin/notice",method:"POST",data:this.form}).then(l=>{V({type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),this.insertDialogVisible=!1,this.loadRecommend(),this.form={}})},deleteNotice(l,i){_({url:"/api/admin/notice/"+i.noticeId,method:"DELETE"}).then(m=>{this.noticeList.splice(l,1),V({type:"success",message:"\u5220\u9664\u6210\u529F"})})},updateOrder(){console.log(this.noticeList),_({url:"/api/admin/notice/order",method:"PUT",data:this.noticeList}).then(l=>{this.orderButton=!0,V({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})})},saveNotice(l,i){_({url:"/api/admin/notice",method:"PUT",data:i}).then(m=>{this.editIndex=-1})},loadRecommend(){_({url:"/api/admin/notice",method:"GET"}).then(l=>{this.noticeList=l.data})},moveUpward(l,i){if(l>0){let m=this.noticeList[l-1];this.noticeList.splice(l-1,1),this.noticeList.splice(l,0,m),this.orderButton=!1}},moveDown(l,i){if(l+1!=this.noticeList.length){let m=this.noticeList[l+1];this.noticeList.splice(l+1,1),this.noticeList.splice(l,0,m),this.orderButton=!1}}},mounted(){this.loadRecommend()}},O=s("\u65B0\u589E"),P=s("\u4FDD\u5B58\u6392\u5E8F"),R={key:0},M={key:1},S={key:0},A={key:1},G=s("\u64CD\u4F5C"),J=s("\u4E0A\u79FB"),K=s("\u4E0B\u79FB"),Q=s("\u4FDD\u5B58"),q=s("\u7F16\u8F91"),H=s("\u5220\u9664"),W={class:"dialog-footer"},X=s("\u53D6\u6D88"),Y=s("\u4FDD\u5B58");function Z(l,i,m,$,n,u){const d=L,p=E,h=D,g=I,k=B,b=N,w=U,y=j;return a(),f(T,null,[t(d,{type:"primary",onClick:i[0]||(i[0]=e=>n.insertDialogVisible=!0)},{default:o(()=>[O]),_:1}),t(d,{type:"primary",disabled:n.orderButton,onClick:u.updateOrder},{default:o(()=>[P]),_:1},8,["disabled","onClick"]),t(k,{data:n.noticeList,style:{width:"100%"}},{default:o(()=>[t(h,{label:"\u6807\u9898"},{default:o(e=>[e.$index==n.editIndex?(a(),f("div",R,[t(p,{modelValue:e.row.title,"onUpdate:modelValue":r=>e.row.title=r,size:"small",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue","onUpdate:modelValue"])])):c("",!0),e.$index!=n.editIndex?(a(),f("div",M,v(e.row.title),1)):c("",!0)]),_:1}),t(h,{label:"\u8DEF\u5F84",prop:"url"},{default:o(e=>[e.$index==n.editIndex?(a(),f("div",S,[t(p,{modelValue:e.row.url,"onUpdate:modelValue":r=>e.row.url=r,size:"small",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue","onUpdate:modelValue"])])):c("",!0),e.$index!=n.editIndex?(a(),f("div",A,v(e.row.url),1)):c("",!0)]),_:1}),t(h,{align:"right"},{header:o(()=>[G]),default:o(e=>[t(d,{size:"small",onClick:r=>u.moveUpward(e.$index,e.row)},{default:o(()=>[J]),_:2},1032,["onClick"]),t(d,{size:"small",onClick:r=>u.moveDown(e.$index,e.row)},{default:o(()=>[K]),_:2},1032,["onClick"]),e.$index==n.editIndex?(a(),x(d,{key:0,size:"small",type:"danger",onClick:r=>u.saveNotice(e.$index,e.row)},{default:o(()=>[Q]),_:2},1032,["onClick"])):c("",!0),e.$index!=n.editIndex?(a(),x(d,{key:1,size:"small",type:"danger",onClick:r=>n.editIndex=e.$index},{default:o(()=>[q]),_:2},1032,["onClick"])):c("",!0),t(g,{"confirm-button-text":"\u786E\u8BA4","cancel-button-text":"\u53D6\u6D88",icon:l.InfoFilled,"icon-color":"red",onConfirm:r=>u.deleteNotice(e.$index,e.row),title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?"},{reference:o(()=>[t(d,{size:"small",type:"danger"},{default:o(()=>[H]),_:1})]),_:2},1032,["icon","onConfirm"])]),_:1})]),_:1},8,["data"]),t(y,{modelValue:n.insertDialogVisible,"onUpdate:modelValue":i[5]||(i[5]=e=>n.insertDialogVisible=e),title:"\u65B0\u589E\u63A8\u8350",width:"60%"},{footer:o(()=>[z("span",W,[t(d,{onClick:i[3]||(i[3]=e=>n.insertDialogVisible=!1)},{default:o(()=>[X]),_:1}),t(d,{type:"primary",onClick:i[4]||(i[4]=e=>u.insertNotice())},{default:o(()=>[Y]),_:1})])]),default:o(()=>[t(w,{ref:"formRef",model:n.form,"label-width":"120px"},{default:o(()=>[t(b,{label:"\u6807\u9898"},{default:o(()=>[t(p,{modelValue:n.form.title,"onUpdate:modelValue":i[1]||(i[1]=e=>n.form.title=e)},null,8,["modelValue"])]),_:1}),t(b,{label:"\u8DEF\u5F84"},{default:o(()=>[t(p,{modelValue:n.form.url,"onUpdate:modelValue":i[2]||(i[2]=e=>n.form.url=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}var de=C(F,[["render",Z]]);export{de as default};
