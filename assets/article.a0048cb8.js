import{_ as w,s as o,a as T}from"./index.06e84b55.js";import{r as x,o as i,f as n,h as t,i as d,t as r,F as u,g as b,l as c,k as f,w as _,q as g,d as k,n as y}from"./vendor.3451bb13.js";const C={name:"article_info",data(){return{fans:2,loginUsername:this.$store.state.username,param:{articleId:this.$route.params.id},loading:!0,recommendList:null,commentList:[],article:{},commentText:"",subject:[],articleList:[],showSubject:!1,like:0}},components:{},methods:{fansClick(s){this.fans==2?o({url:"/api/fans/"+s,method:"POST"}).then(a=>{this.fans=1}):o({url:"/api/fans/"+s,method:"DELETE"}).then(a=>{this.fans=2})},isFans(){o({url:"/api/fans/is",method:"get",params:{username:this.article.username}}).then(s=>{s.data==1?this.fans=1:this.fans=2})},likeClick(){this.like==1?o({url:"/api/article/like",method:"DELETE",params:this.param}).then(s=>{this.like=0}):o({url:"/api/article/like",method:"POST",params:this.param}).then(s=>{this.like=1})},isLike(){o({url:"/api/article/like",method:"GET",params:this.param}).then(s=>{this.like=s.data})},sleep(s){for(var a=new Date,v=a.getTime()+s;;)if(a=new Date,a.getTime()>v)return},loadArticleInfo(){o({url:"/api/article/load",method:"GET",params:this.param}).then(s=>{this.article=s.data,this.$store.state.username!=""&&this.isFans(),this.loading=!1})},selectSubjectArticleList(){o({url:"/api/subject/article",method:"GET",params:this.param}).then(s=>{this.subject=s.data,this.subject!=null&&(this.articleList=s.data.articleList,this.showSubject=!0)})},loadRecommend(){o({url:"/api/article/recommend",method:"GET"}).then(s=>{this.recommendList=s.data})},load(){this.param.articleId=this.$route.params.id,this.$store.state.username!=""&&this.isLike(),this.selectSubjectArticleList(),this.loadArticleInfo()}},mounted(){this.load(),this.loadRecommend()},watch:{$route:"load"}},j={class:"row"},E={class:"col-md-3 col-lg-3 d-md-inline d-none"},I={key:0,class:"list-group mb-2"},S={class:"list-group-item active"},N=t("span",{class:"float-end"},"\u4E13\u9898",-1),D={key:1,class:"card mb-2"},V=t("div",{class:"card-body"},[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1),A=[V],B={class:"list-group mb-2"},F=t("a",{class:"list-group-item active"},[d("\u63A8\u8350"),t("span",{class:"float-end"},"\u{1F387}")],-1),G=["href"],P={class:"col-md-9 col-lg-9 pb-5"},z={class:"row"},O={class:"col-lg-8 move-p-lr-0"},H={class:"card mb-2 article-body"},M={key:0,class:"card-body"},R=d(" . "),U={style:{color:"rgb(180, 180, 180)"}},q=["innerHTML"],J={key:1,class:"card-body"},K={class:"card mb-2 move-b-lr-0"},Q={class:"card-body"},W=t("span",{style:{"font-size":"16px",color:"rgb(0 0 0)","font-weight":"600"}},"\u6807\u7B7E\uFF1A",-1),X=y('<div class="card mb-2 move-b-lr-0"><div class="card-body"><a class="article-title">\u516B\u70B9\u96F6\u70B9\u96F6\u70B9\u9644\u8FD1\u6269\u5927\u98DE\u673A\u554A\u6492\u65E6\u89E3\u653E</a><div><span>2020.05.27</span><a class="float-end">\u533F\u540D</a></div></div></div><div class="card mb-2 move-b-lr-0"><div class="card-body"><a class="article-title">i\u4FC4\u65E5\u989Du\u6211i\u7684\u4E0A\u7A7A\u7684\u98DE\u673A\u997F\u54E6\u4E94\u65E5\u4E3Aur</a><div><span>2020.05.27</span><a class="float-end">\u533F\u540D</a></div></div></div><div class="card mb-2 move-b-lr-0"><div class="card-body"><a class="article-title">\u554A\u5361\u8428\u4E01\u79EF\u5206\u5361\u7684\u808C\u80A4\u5065\u5EB7\u7684\u623F\u95F4\u6269\u5927\u89E3\u653E</a><div><span>2020.05.27</span><a class="float-end">\u533F\u540D</a></div></div></div>',3),Y={class:"col-lg-4 move-p-lr-0"},Z={class:"list-group mb-2 move-b-lr-0"},$=y('<div class="card move-b-lr-0"><div class="card-body"><p><a href="/post/0b0d396713a54e2fbf714478d740e53e" target="_blank">\u5173\u4E8E</a></p><p><a href="/post/98b255d539f743e193e398bfa9b97cfd" target="_blank">\u53CB\u60C5\u94FE\u63A5</a></p><p><a href="http://beian.miit.gov.cn" target="_blank">\u6E58ICP\u590720009234\u53F7</a></p><p><a href="/map" class="hidden">\u5730\u56FE</a></p></div></div>',1),tt={class:"navbar fixed-bottom navbar-light bg-light",style:{"border-top":"1px solid rgb(206, 206, 206)"}},et={class:"container-fluid"},st={class:"col-md-12 col-lg-12"},it=t("a",{disabled:"",class:"btn btn-outline-primary btn-sm mini-but"},"\u4E3E\u62A5",-1),at=["href"],lt=d("\u4FEE\u6539"),nt=t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"#top"},"\u2B06TOP",-1);function ot(s,a,v,rt,e,h){const p=x("router-link"),L=T;return i(),n(u,null,[t("div",j,[t("div",E,[e.showSubject?(i(),n("div",I,[t("a",S,[d(r(e.subject.subjectName),1),N]),(i(!0),n(u,null,b(e.articleList,(l,m)=>(i(),k(p,{class:g([l.articleId==e.article.articleId?"active2":"","list-group-item"]),key:m,to:{name:"article_info",params:{id:l.articleId}}},{default:_(()=>[d(r(l.title),1)]),_:2},1032,["class","to"]))),128))])):c("",!0),e.recommendList==null?(i(),n("div",D,A)):c("",!0),t("div",B,[F,(i(!0),n(u,null,b(e.recommendList,(l,m)=>(i(),n("a",{class:"list-group-item",key:m,href:"/article/"+l.articleId},r(l.title),9,G))),128))])]),t("div",P,[t("div",z,[t("div",O,[t("div",H,[e.loading?c("",!0):(i(),n("div",M,[t("div",null,[t("strong",null,[f(p,{to:{name:"author_article",params:{username:e.article.username}}},{default:_(()=>[d(r(e.article.nickname),1)]),_:1},8,["to"])]),R,t("span",U,r(e.article.createDate),1),e.fans==2?(i(),n("button",{key:0,class:"btn btn-outline-warning float-end t-b-m-1",onClick:a[0]||(a[0]=l=>h.fansClick(e.article.username))}," \u8BA2\u9605 ")):c("",!0),e.fans==1?(i(),n("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:a[1]||(a[1]=l=>h.fansClick(e.article.username))}," \u53D6\u6D88\u8BA2\u9605 ")):c("",!0)]),t("h3",null,[t("strong",null,r(e.article.title),1)]),t("div",{class:"markdown-body",innerHTML:e.article.text},null,8,q)])),e.loading?(i(),n("div",J,"\u52A0\u8F7D\u4E2D...")):c("",!0)]),t("div",K,[t("div",Q,[W,(i(!0),n(u,null,b(e.article.tagList,(l,m)=>(i(),n("span",{key:m,style:{"font-size":"16px",color:"rgb(220, 53, 69)"}},"\xA0"+r(l.tagName)+"\xA0",1))),128))])]),X]),t("div",Y,[t("div",Z,[f(L)]),$])])])]),t("nav",tt,[t("div",et,[t("div",st,[t("a",{class:g([e.like==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but"]),style:{"margin-left":"0px"},onClick:a[2]||(a[2]=(...l)=>h.likeClick&&h.likeClick(...l))},"\u559C\u6B22",2),it,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://ttcxy.cn/post/"+e.param.articleId},"\u9605\u8BFB\u6A21\u5F0F",8,at),e.article.username==e.loginUsername?(i(),k(p,{key:0,class:"btn btn-outline-primary btn-sm mini-but",to:{name:"article-editor",params:{id:e.article.articleId}}},{default:_(()=>[lt]),_:1},8,["to"])):c("",!0),nt])])])],64)}var mt=w(C,[["render",ot]]);export{mt as default};
