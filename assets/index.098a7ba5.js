import{g,r as h,o as d,e as r,f as t,u as a,v as n,m as c,w as u,n as m,F as v,j as _}from"./vendor.610329c2.js";import{_ as f,s as b}from"./index.3c783bdb.js";const y={name:"login",data(){return{type:"dl",loginData:{username:"",password:"",mail:"",password1:"",rememberMe:!0}}},components:{},methods:{login(){b({url:"/api/authenticate",method:"post",data:this.loginData}).then(l=>{if(l.status===200){let o=g(l.data.jwt);localStorage.setItem("jwt",l.data.jwt),localStorage.setItem("authorData",JSON.stringify(o)),this.$router.push({path:"/author/"+o.sub})}}).catch(l=>{alert(l.data)})},register(){if(this.loginData.password!==this.loginData.password1){alert("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");return}b({url:"/api/register",method:"post",data:this.loginData}).then(l=>{alert(l.data)}).catch(l=>{alert(l.data)})}},mounted(){localStorage.removeItem("jwt"),localStorage.removeItem("authorData")}},w={key:0,id:"loginModal",class:"modal-dialog"},D={class:"modal-content"},x=t("div",{class:"modal-header"},[t("h4",{class:"modal-title text-center"},"\u767B\u5F55")],-1),W={id:"model-body",class:"modal-body"},k=t("label",null,"\u90AE\u7BB1/\u7528\u6237\u540D\uFF1A",-1),V={class:"form-group"},j=t("label",null,"\u5BC6\u7801\uFF1A",-1),C={class:"form-group"},N={class:"modal-footer"},S={class:"btn-group W100 mb10px"},U={class:"btn-group W100 mb10px"},I={class:"btn-group W100"},B=_("\u8FD4\u56DE\u9996\u9875"),M={key:1,class:"modal-dialog"},z={class:"modal-content"},F=t("div",{class:"modal-header"},[t("h4",{class:"modal-title text-center"},"\u6CE8\u518C")],-1),T={id:"model-body",class:"modal-body"},E=t("label",null,"\u90AE\u7BB1\uFF1A",-1),J={class:"input-group"},O=t("label",null,"\u5BC6\u7801\uFF1A",-1),q={class:"form-group"},A=t("label",null,"\u786E\u8BA4\u5BC6\u7801\uFF1A",-1),G={class:"form-group"},H={class:"modal-footer"},K={class:"btn-group W100 mb10px"},L={class:"btn-group W100 mb10px"},P={class:"btn-group W100"},Q=_("\u8FD4\u56DE\u9996\u9875");function R(l,o,X,Y,e,i){const p=h("router-link");return d(),r(v,null,[e.type=="dl"?(d(),r("div",w,[t("div",D,[x,t("div",W,[k,t("div",V,[a(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.loginData.username=s),placeholder:"\u90AE\u7BB1/\u7528\u6237\u540D",autocomplete:"off",class:"form-control"},null,512),[[n,e.loginData.username]])]),j,t("div",C,[a(t("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=s=>e.loginData.password=s),placeholder:"\u5BC6\u7801",autocomplete:"off",class:"form-control"},null,512),[[n,e.loginData.password]])])]),t("div",N,[t("div",S,[t("button",{type:"button",class:"btn btn-primary W100",onClick:o[2]||(o[2]=s=>i.login())},"\u767B\u5F55")]),t("div",U,[t("button",{type:"button",class:"btn btn-primary W100",onClick:o[3]||(o[3]=s=>e.type="zc")},"\u6CE8\u518C")]),t("div",I,[c(p,{to:"/",type:"button",class:"btn btn-default W100"},{default:u(()=>[B]),_:1})])])])])):m("",!0),e.type=="zc"?(d(),r("div",M,[t("div",z,[F,t("div",T,[E,t("div",J,[a(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.loginData.mail=s),placeholder:"\u90AE\u7BB1\u53F7",autocomplete:"off",class:"form-control"},null,512),[[n,e.loginData.mail]])]),O,t("div",q,[a(t("input",{type:"password","onUpdate:modelValue":o[5]||(o[5]=s=>e.loginData.password=s),placeholder:"\u5BC6\u7801",autocomplete:"off",class:"form-control"},null,512),[[n,e.loginData.password]])]),A,t("div",G,[a(t("input",{type:"password","onUpdate:modelValue":o[6]||(o[6]=s=>e.loginData.password1=s),placeholder:"\u786E\u8BA4\u5BC6\u7801",autocomplete:"off",class:"form-control"},null,512),[[n,e.loginData.password1]])])]),t("div",H,[t("div",K,[t("button",{type:"button",class:"btn btn-primary W100",onClick:o[7]||(o[7]=s=>i.register())},"\u6CE8\u518C")]),t("div",L,[t("button",{type:"button",class:"btn btn-primary W100",onClick:o[8]||(o[8]=s=>e.type="dl")},"\u767B\u5F55")]),t("div",P,[c(p,{to:"/",type:"button",class:"btn btn-default W100"},{default:u(()=>[Q]),_:1})])])])])):m("",!0)],64)}var tt=f(y,[["render",R]]);export{tt as default};
