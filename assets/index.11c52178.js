import{c as L,a as I,b as O,r as A,o as d,d as D,e as l,f as c,g as T,h as E,F as b,i as R,j as V,t as y,k as x,N as $,l as w,z as S}from"./vendor.610329c2.js";const k=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};k();const N="modulepreload",j={},z="/",t=function(r,n){return!n||n.length===0?r():Promise.all(n.map(a=>{if(a=`${z}${a}`,a in j)return;j[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":N,o||(i.as="script",i.crossOrigin=""),i.href=a,document.head.appendChild(i),o)return new Promise((h,g)=>{i.addEventListener("load",h),i.addEventListener("error",g)})})).then(()=>r())},C=[{path:"/",name:"home",component:()=>t(()=>import("./index.a0e02b3e.js"),["assets/index.a0e02b3e.js","assets/index.124220c9.css","assets/vendor.610329c2.js"]),children:[{path:"/",name:"main",component:()=>t(()=>import("./index.458d8436.js"),["assets/index.458d8436.js","assets/index.ba2758af.css","assets/vendor.610329c2.js"])},{path:"dynamic",name:"dynamic",component:()=>t(()=>import("./dynamic.19ebbef6.js"),["assets/dynamic.19ebbef6.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"/article",name:"article",component:()=>t(()=>import("./index.458d8436.js"),["assets/index.458d8436.js","assets/index.ba2758af.css","assets/vendor.610329c2.js"])},{path:"/video",name:"video",component:()=>t(()=>import("./index.1b99eb3a.js"),["assets/index.1b99eb3a.js","assets/index.a8c359fd.css","assets/vendor.610329c2.js"])},{path:"video/:id",name:"video_info",component:()=>t(()=>import("./video.af1c6abb.js"),["assets/video.af1c6abb.js","assets/video.55cd542b.css","assets/vendor.610329c2.js"])},{path:"video/:id/contribute",name:"video_contribute",component:()=>t(()=>import("./contribute.fccc87bf.js"),["assets/contribute.fccc87bf.js","assets/vendor.610329c2.js"])},{path:"/author/:username",name:"author_index",component:()=>t(()=>import("./index.9d948156.js"),["assets/index.9d948156.js","assets/index.887cc823.css","assets/vendor.610329c2.js"]),children:[{path:"",name:"author_article",component:()=>t(()=>import("./article.fd32a553.js"),["assets/article.fd32a553.js","assets/article.f44ea648.css","assets/vendor.610329c2.js"])},{path:"video",name:"author_video",component:()=>t(()=>import("./video.ab4ee769.js"),["assets/video.ab4ee769.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"setting",name:"author_setting",component:()=>t(()=>import("./setting.09aa0063.js"),["assets/setting.09aa0063.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"subject",name:"author_subject",component:()=>t(()=>import("./subject.71acda8f.js"),["assets/subject.71acda8f.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"subscribe",name:"author_subscribe",component:()=>t(()=>import("./subscribe.3f126880.js"),["assets/subscribe.3f126880.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"collect",name:"author_collect",component:()=>t(()=>import("./collect.a301fab1.js"),["assets/collect.a301fab1.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])}]},{path:"/article/:id",name:"article_info",component:()=>t(()=>import("./article.6a93e9d4.js"),["assets/article.6a93e9d4.js","assets/article.79f2f097.css","assets/vendor.610329c2.js"])},{path:"/subject",name:"subject_index",component:()=>t(()=>import("./index.31470769.js"),["assets/index.31470769.js","assets/index.7fdbd187.css","assets/vendor.610329c2.js"])},{path:"/authors",name:"authors",component:()=>t(()=>import("./authors.7064728e.js"),["assets/authors.7064728e.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"])},{path:"/subject/:subject_id",name:"subject_info",component:()=>t(()=>import("./post.aefb23d6.js"),["assets/post.aefb23d6.js","assets/post.d8b6ae4a.css","assets/vendor.610329c2.js"])},{path:"/search",name:"search_index",component:()=>t(()=>import("./index.b91a5212.js"),["assets/index.b91a5212.js","assets/vendor.610329c2.js"])}]},{path:"/admin",name:"admin",component:()=>t(()=>import("./index.467afda4.js"),["assets/index.467afda4.js","assets/index.145032b4.css","assets/el-popper.5f8b759b.css","assets/vendor.610329c2.js"]),redirect:"/admin/video",children:[{path:"video",name:"admin_video",component:()=>t(()=>import("./video.33012bc1.js"),["assets/video.33012bc1.js","assets/video.5e204305.css","assets/el-popper.5f8b759b.css","assets/el-loading.fb7520d6.css","assets/el-col.8d177c8f.css","assets/el-overlay.1f10a2a8.css","assets/el-pagination.a3bad24b.css","assets/el-button.c57324dd.css","assets/el-select.8505b491.css","assets/el-popover.5054015b.css","assets/el-form-item.a77cdfac.css","assets/vendor.610329c2.js"])},{path:"comment",name:"admin_comment",component:()=>t(()=>import("./comment.caf0664c.js"),["assets/comment.caf0664c.js","assets/comment.8b9e2426.css","assets/el-popper.5f8b759b.css","assets/el-loading.fb7520d6.css","assets/el-col.8d177c8f.css","assets/el-pagination.a3bad24b.css","assets/el-button.c57324dd.css","assets/el-select.8505b491.css","assets/el-popover.5054015b.css","assets/el-form-item.a77cdfac.css","assets/vendor.610329c2.js"])},{path:"recommend",name:"admin_recommend",component:()=>t(()=>import("./recommend.ec43fb92.js"),["assets/recommend.ec43fb92.js","assets/el-popper.5f8b759b.css","assets/el-overlay.1f10a2a8.css","assets/el-form-item.a77cdfac.css","assets/el-button.c57324dd.css","assets/el-popover.5054015b.css","assets/vendor.610329c2.js"])},{path:"author",name:"admin_author",component:()=>t(()=>import("./author.cf8cd06d.js"),["assets/author.cf8cd06d.js","assets/el-popper.5f8b759b.css","assets/el-col.8d177c8f.css","assets/el-button.c57324dd.css","assets/vendor.610329c2.js"])},{path:"role",name:"admin_role",component:()=>t(()=>import("./role.a8fc7f96.js"),["assets/role.a8fc7f96.js","assets/el-popper.5f8b759b.css","assets/el-loading.fb7520d6.css","assets/el-col.8d177c8f.css","assets/el-button.c57324dd.css","assets/vendor.610329c2.js"])},{path:"resource",name:"admin_resource",component:()=>t(()=>import("./resource.83242d98.js"),["assets/resource.83242d98.js","assets/el-popper.5f8b759b.css","assets/el-overlay.1f10a2a8.css","assets/el-form-item.a77cdfac.css","assets/el-button.c57324dd.css","assets/el-select.8505b491.css","assets/vendor.610329c2.js"])}]},{path:"/article-editor/:id",name:"article-editor",component:()=>t(()=>import("./article-editor.916852ad.js"),["assets/article-editor.916852ad.js","assets/article-editor.6896a784.css","assets/vendor.610329c2.js"])},{path:"/login",name:"login",component:()=>t(()=>import("./index.2f0757df.js"),["assets/index.2f0757df.js","assets/index.0dbf4bdd.css","assets/vendor.610329c2.js"])},{path:"/:catchAll(.*)",component:()=>t(()=>import("./404.8bb87aaa.js"),["assets/404.8bb87aaa.js","assets/dynamic.3a6b9730.css","assets/vendor.610329c2.js"]),hidden:!0}],p=L({history:I(),routes:C});var _=O({state:{username:"",user:{},roles:[]},actions:{}}),f=(e,r)=>{const n=e.__vccOpts||e;for(const[a,o]of r)n[a]=o;return n};const q={};function B(e,r){const n=A("router-view");return d(),D(n)}var F=f(q,[["render",B]]);p.beforeEach((e,r,n)=>{let a=JSON.parse(localStorage.getItem("authorData"));a!=null?(_.state.username=a.sub,_.state.roles=a.authorities.split(","),_.state.author=a.author.author):(_.state.username="",_.state.roles=[],_.state.author={}),n()});p.afterEach((e,r,n)=>{console.log("\u8DEF\u7531\u8DF3\u8F6C\u540E")});const J={name:"info",data(){return{count:0,advList:[],zz:!1}},created(){},methods:{},mounted(){}},W={class:"card-body"},G=c("p",null,[c("a",{href:"https://ttcxy.net/post/0b0d396713a54e2fbf714478d740e53e",target:"_blank"},"\u5173\u4E8E")],-1),H=c("p",null,[c("a",{href:"https://ttcxy.net/post/98b255d539f743e193e398bfa9b97cfd",target:"_blank"},"\u53CB\u60C5\u94FE\u63A5")],-1),K=c("p",null,[c("a",{href:"http://beian.miit.gov.cn",target:"_blank"},"\u6E58ICP\u590720009234\u53F7")],-1),U=c("a",{href:"/map",class:"hidden"},"\u5730\u56FE",-1),M=[G,H,K,U];function Q(e,r,n,a,o,s){return d(),l("div",W,M)}var X=f(J,[["render",Q]]);function Y(e){return m({url:"/api/refresh",method:"POST",data:e})}function Z(e){let r=T(e);localStorage.setItem("jwt",e),localStorage.setItem("authorData",JSON.stringify(r.author))}function se(e){localStorage.removeItem("jwt"),localStorage.removeItem("authorData"),e.state.username="",e.state.roles=[]}E.defaults.withCredentials=!0;let v=!1,P=[];const m=E.create({baseURL:"https://ttcxy.cn/",timeout:3e4});m.interceptors.request.use(e=>(e.url=="/api/authenticate"||(e.headers.Authorization=localStorage.getItem("jwt")),e),e=>Promise.reject(e));m.interceptors.response.use(e=>e,e=>e.response.status===401?(location.href="/login",Promise.reject(e)):e.response.status===403?(alert("\u65E0\u6743\u9650"),Promise.reject(e)):e.response.status===404?(alert("\u8D44\u6E90\u4E0D\u5B58\u5728"),Promise.reject(e)):e.response.status===500?Promise.reject(e.response):e.response.status===666?v?new Promise(r=>{P.push(n=>{e.response.headers.Authorization=n,r(m(e.response.config))})}):(v=!0,Y({jwt:localStorage.getItem("jwt")}).then(r=>(Z(r.jwt),e.response.headers.Authorization=r.jwt,P.forEach(n=>n(r.jwt)),m(e.response.config))).catch(r=>(localStorage.removeItem("jwt"),localStorage.removeItem("authorData"),globalThis.$store.state.username="",window.location.href="/",Promise.reject(r))).finally(()=>{v=!1})):Promise.reject(e.response));const ee={name:"notice",data(){return{count:0,advList:[]}},created(){},methods:{loadNotice(){m({url:"/api/notice/list",method:"GET"}).then(e=>{this.advList=e.data})}},mounted(){this.loadNotice()}},te=c("a",{class:"list-group-item active"},[V("\u63A8\u8350"),c("span",{class:"float-end"},"\u{1F387}")],-1),oe=["href"];function re(e,r,n,a,o,s){return d(),l(b,null,[te,(d(!0),l(b,null,R(o.advList,(i,h)=>(d(),l("a",{key:h,href:i.url,class:"list-group-item move-b-lr-0"},y(i.title),9,oe))),128))],64)}var ne=f(ee,[["render",re]]);p.beforeEach((e,r)=>{document.documentElement.scrollTop=0});const u=x(F);u.use($);u.use(w,{locale:S});u.use(p);u.use(_);u.use(X);u.use(ne);u.mount("#app");export{f as _,ne as a,X as b,se as r,m as s};
