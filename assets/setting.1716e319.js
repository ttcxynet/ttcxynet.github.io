import{_ as m,s as d,r as c}from"./index.3c783bdb.js";import{o as h,e as p,f as t,u as r,v as i}from"./vendor.610329c2.js";const _={name:"author_setting",data(){return{author:{username:"",nickname:"",mail:"",headUrl:"https://avatars.githubusercontent.com/u/15867678?v=4"}}},components:{},methods:{uploadImage(a){let o=a.target.files[0],n=new FormData;n.append("file",o),n.append("type","2"),console.log(n.get("file")),d({url:"/api/file/upload",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}}).then(u=>{this.author.headUrl="http://106.54.189.191/api/file/"+u.data,alert(this.author.headUrl)})},logout(){c(this.$store),window.location.href="/"},save(){d({url:"/api/author",method:"PUT",data:this.author}).then(a=>{alert("\u4FDD\u5B58\u6210\u529F"),this.selectAuthorLoad()})},selectAuthorLoad(){d({url:"/api/author/"+this.$route.params.username,method:"GET"}).then(a=>{this.author=a.data})}},mounted(){this.selectAuthorLoad()}},v={style:{margin:"10px"}},b={class:"row mb-3"},f=t("label",{class:"col-sm-2 col-form-label"},"\u5934\u50CF",-1),g={class:"col-sm-10"},y={class:"form-control"},w=["src"],x={class:"row mb-3"},k=t("label",{class:"col-sm-2 col-form-label"},"\u7528\u6237\u540D",-1),U={class:"col-sm-10"},I={class:"row mb-3"},T=t("label",{class:"col-sm-2 col-form-label",disabled:""},"\u90AE\u7BB1",-1),V={class:"col-sm-10"},B={class:"row mb-3"},C=t("label",{class:"col-sm-2 col-form-label"},"\u6635\u79F0",-1),A={class:"col-sm-10"},E={class:"row mb-3"},L=t("label",{class:"col-sm-2 col-form-label"},"\u7B7E\u540D",-1),j={class:"col-sm-10"};function D(a,o,n,u,e,l){return h(),p("div",v,[t("div",b,[f,t("div",g,[t("div",y,[t("img",{src:e.author.headUrl,onerror:'this.src="https://avatars.githubusercontent.com/u/15867678?v=4"',class:"img-thumbnail",style:{height:"150px",width:"150px"},onclick:"document.getElementById('imageInput').click()"},null,8,w),t("input",{type:"file",style:{display:"none"},id:"imageInput",onChange:o[0]||(o[0]=(...s)=>l.uploadImage&&l.uploadImage(...s))},null,32)])])]),t("div",x,[k,t("div",U,[r(t("input",{class:"form-control",disabled:"","onUpdate:modelValue":o[1]||(o[1]=s=>e.author.username=s)},null,512),[[i,e.author.username]])])]),t("div",I,[T,t("div",V,[r(t("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":o[2]||(o[2]=s=>e.author.mail=s)},null,512),[[i,e.author.mail]])])]),t("div",B,[C,t("div",A,[r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=s=>e.author.nickname=s)},null,512),[[i,e.author.nickname]])])]),t("div",E,[L,t("div",j,[r(t("input",{class:"form-control",id:"inputPassword3","onUpdate:modelValue":o[4]||(o[4]=s=>e.author.signature=s)},null,512),[[i,e.author.signature]])])]),t("div",null,[t("button",{class:"btn btn-primary",onClick:o[5]||(o[5]=(...s)=>l.save&&l.save(...s))},"\u4FDD\u5B58\u4FE1\u606F"),t("button",{class:"btn btn-primary float-end",onClick:o[6]||(o[6]=(...s)=>l.logout&&l.logout(...s))}," \u9000\u51FA\u767B\u5F55 ")])])}var G=m(_,[["render",D]]);export{G as default};
