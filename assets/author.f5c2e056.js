/* empty css                  *//* empty css               *//* empty css                  */import{_ as w,s as u}from"./index.3c783bdb.js";import{A as k,J as g,B as C,L as I,O as L,I as v,R as y,o as R,d as x,w as o,m as t,f as _,j as r}from"./vendor.610329c2.js";const A={name:"admin_author",data(){return{routeName:this.$route.name,formInline:{user:""},authorList:[],roleIdList:[],roleList:[],queryData:"",selectAuthorId:"",roleForm:[],options:[{value:"\u4F7F\u7528"},{value:"\u7981\u7528"}],value:""}},watch:{roleIdList:{handler(){this.$nextTick(()=>{for(let e in this.roleList)this.roleIdList.indexOf(this.roleList[e].roleId)>-1&&this.$refs.multipleTable.toggleRowSelection(this.roleList[e])})}}},created(){},methods:{checkRole(e,l){this.roleForm=e},saveAuthorRole(){u({url:"api/admin/role/author/"+this.selectAuthorId,method:"POST",data:this.roleForm}).then(e=>{this.roleIdList=e.data,k({type:"success",message:"\u5220\u9664\u6210\u529F"})})},rowAuthorClick(e,l,h){this.selectAuthorId=e.authorId,this.selectRole(e)},selectRole(e){u({url:"api/admin/role",method:"GET"}).then(l=>{this.roleList=l.data,u({url:"api/admin/role/author/"+e.authorId,method:"GET"}).then(h=>{this.roleIdList=h.data})})},selectAuthor(){u({url:"/api/admin/author",method:"GET",params:{queryData:this.queryData}}).then(e=>{this.authorList=e.data})}},mounted(){this.selectAuthor()}},E={style:{margin:"10px"}},T=r("\u641C\u7D22"),V=r("\u7F16\u8F91"),j=r("\u5220\u9664"),q={style:{margin:"10px"}},B=r("\u4FDD\u5B58\u6743\u9650"),D=r("\u641C\u7D22");function N(e,l,h,S,i,n){const d=g,c=C,s=I,p=L,m=v,f=y;return R(),x(f,null,{default:o(()=>[t(m,{span:16},{default:o(()=>[_("div",E,[t(c,{modelValue:i.queryData,"onUpdate:modelValue":l[1]||(l[1]=a=>i.queryData=a),placeholder:"\u7528\u6237\u540D/\u6635\u79F0/\u90AE\u7BB1/IP",class:"input-with-select",style:{"padding-bottom":"5px"}},{append:o(()=>[t(d,{onClick:l[0]||(l[0]=a=>n.selectAuthor())},{default:o(()=>[T]),_:1})]),_:1},8,["modelValue"]),t(p,{data:i.authorList,"highlight-current-row":"",onRowClick:n.rowAuthorClick,"max-height":"800",border:"",style:{width:"100%"}},{default:o(()=>[t(s,{prop:"username",label:"\u7528\u6237\u540D",width:"150"}),t(s,{prop:"nickname",label:"\u6635\u79F0",width:"150"}),t(s,{prop:"mail",label:"\u90AE\u7BB1"}),t(s,{prop:"address",label:"\u64CD\u4F5C",width:"135"},{default:o(a=>[t(d,{size:"small",onClick:b=>(e.handleEdit(a.$index,a.row),e.dialogVisible=!0)},{default:o(()=>[V]),_:2},1032,["onClick"]),t(d,{size:"small",type:"danger",onClick:b=>e.deleteResource(a.row.resourceId)},{default:o(()=>[j]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onRowClick"])])]),_:1}),t(m,{span:8},{default:o(()=>[_("div",q,[t(c,{modelValue:e.input2,"onUpdate:modelValue":l[2]||(l[2]=a=>e.input2=a),placeholder:"",disabled:"",style:{"padding-bottom":"5px"}},{prepend:o(()=>[t(d,{onClick:n.saveAuthorRole},{default:o(()=>[B]),_:1},8,["onClick"])]),append:o(()=>[D]),_:1},8,["modelValue"]),t(p,{data:i.roleList,ref:"multipleTable",onSelectionChange:n.checkRole,"max-height":"800",border:"",style:{width:"100%"}},{default:o(()=>[t(s,{type:"selection",width:"40"}),t(s,{prop:"roleName",label:"\u540D\u79F0"})]),_:1},8,["data","onSelectionChange"])])]),_:1})]),_:1})}var P=w(A,[["render",N]]);export{P as default};
