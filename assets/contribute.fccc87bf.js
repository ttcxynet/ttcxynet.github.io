import{_ as h,s as d}from"./index.11c52178.js";import{o as n,e as c,f as e,u as m,v as p,x as v,F as b,i as _,n as u,t as g}from"./vendor.610329c2.js";const y={name:"video_contribute",data(){return{fans:2,loginUsername:this.$store.state.username,videoId:this.$route.params.id,loading:!0,recommendList:null,commentList:[],article:{},commentText:"",subject:[],articleList:[],showSubject:!1,like:0,videoClassList:[],formData:{coverUrl:""}}},components:{},methods:{uploadImage(o){let t=o.target.files[0],a=new FormData;a.append("file",t),a.append("type","1"),console.log(a.get("file")),d({url:"/api/file/upload",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(i=>{this.formData.coverUrl="https://ttcxy.cn/api/file/"+i.data}).catch(i=>{alert(i.data)})},upload(o){let t=o.target.files[0],a=new FormData;a.append("file",t),a.append("type","2"),console.log(a.get("file")),d({url:"/api/file/upload",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(i=>{this.formData.videoUrl="https://ttcxy.cn/api/file/"+i.data})},save(){d({url:"/api/video",method:"put",data:this.formData}).then(o=>{this.formData.videoUrl="https://ttcxy.cn/api/file/"+o.data,this.$router.push("/video/"+this.videoId)})},loadVideoClassList(){d({url:"/api/class",method:"get",params:{type:"video"}}).then(o=>{this.videoClassList=o.data})},fansClick(o){},isFans(){},likeClick(){},isLike(){},loadArticleInfo(){},selectSubjectArticleList(){},loadRecommend(){},load(){d({url:"/api/video/"+this.$route.params.id+"/author",method:"get"}).then(o=>{this.formData=o.data})}},mounted(){this.load(),this.loadRecommend(),this.loadVideoClassList()},watch:{$route:"load"}},D={class:"row"},k={class:"col-md-8 pb-5"},I={class:"mb-3"},C=e("label",{for:"inputPassword",class:"col-sm-2 col-form-label"},"\u89C6\u9891\u6807\u9898",-1),w={class:"mb-3"},x=e("label",{for:"inputPassword",class:"col-sm-2 col-form-label"},"\u63CF\u8FF0",-1),L={class:"mb-3"},U=e("label",{for:"inputPassword",class:"col-sm-2 col-form-label"},"\u5206\u7C7B",-1),F=["value"],V={class:"mb-3"},j=e("label",{for:"formFileDisabled",class:"form-label"},"\u5C01\u9762",-1),B={key:0,class:"form-control"},P=["src"],S={key:1,class:"mb-3"},T=e("button",{class:"btn btn-primary",style:{width:"100%"},type:"button",onclick:"document.getElementById('imageInput').click()"},"\u4E0A\u4F20\u5C01\u9762",-1),E=[T],N={class:"mb-3"},A=e("label",{for:"formFileDisabled",class:"form-label"},"\u6587\u4EF6",-1);function M(o,t,a,i,l,r){return n(),c("div",D,[e("div",k,[e("div",I,[C,m(e("input",{class:"form-control",id:"inputPassword","onUpdate:modelValue":t[0]||(t[0]=s=>l.formData.title=s)},null,512),[[p,l.formData.title]])]),e("div",w,[x,m(e("input",{class:"form-control",id:"inputPassword","onUpdate:modelValue":t[1]||(t[1]=s=>l.formData.describe=s)},null,512),[[p,l.formData.describe]])]),e("div",L,[U,m(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=s=>l.formData.classId=s)},[(n(!0),c(b,null,_(l.videoClassList,(s,f)=>(n(),c("option",{key:f,value:s.classId},g(s.className),9,F))),128))],512),[[v,l.formData.classId]])]),e("div",V,[j,l.formData.coverUrl?(n(),c("div",B,[e("img",{src:l.formData.coverUrl,class:"img-thumbnail",style:{height:"150px"},alt:"...",onclick:"document.getElementById('imageInput').click()"},null,8,P)])):u("",!0),l.formData.coverUrl?u("",!0):(n(),c("div",S,E))]),e("input",{type:"file",style:{display:"none"},id:"imageInput",onChange:t[3]||(t[3]=(...s)=>r.uploadImage&&r.uploadImage(...s))},null,32),e("div",N,[A,e("input",{class:"form-control",type:"file",id:"formFileDisabled",onChange:t[4]||(t[4]=(...s)=>r.upload&&r.upload(...s))},null,32)]),e("button",{type:"submit",class:"btn btn-primary",onClick:t[5]||(t[5]=(...s)=>r.save&&r.save(...s))},"\u6295\u7A3F")])])}var z=h(y,[["render",M]]);export{z as default};
